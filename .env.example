# OAuth2 Server Environment Configuration
# Copy this file to .env and update the values as needed

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Public base URL for the OAuth2 server (used in tokens and discovery)
PUBLIC_BASE_URL=http://localhost:8080

# Server port
PORT=8080

# =============================================================================
# PROXY MODE CONFIGURATION
# =============================================================================
# When these environment variables are set, the server runs in proxy mode
# and forwards authentication requests to an upstream OAuth2 provider

# Upstream OAuth2 provider URL (e.g., Google, Auth0, Keycloak)
# Setting this enables proxy mode
UPSTREAM_PROVIDER_URL=https://accounts.google.com

# Client ID for the upstream provider
UPSTREAM_CLIENT_ID=your-upstream-client-id

# Client secret for the upstream provider
UPSTREAM_CLIENT_SECRET=your-upstream-client-secret

# Callback URL for the upstream provider (should point back to this server)
# You can set this dynamically using OAUTH2_SERVER_URL when running tests, e.g.
#   UPSTREAM_CALLBACK_URL=${OAUTH2_SERVER_URL:-http://localhost:8080}/callback
UPSTREAM_CALLBACK_URL=${OAUTH2_SERVER_URL:-http://localhost:8080}/callback

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT signing key (use a strong, random key in production)
JWT_SIGNING_KEY=your-very-secure-jwt-signing-key-here

# =============================================================================
# DEVELOPMENT/DEBUG CONFIGURATION
# =============================================================================

# Enable debug logging
LOG_LEVEL=debug

# Log format (json or text)
LOG_FORMAT=json

# Enable audit logging
ENABLE_AUDIT=true

# =============================================================================
# PROXY/TRUSTED NETWORKS
# =============================================================================

# Trust proxy headers (X-Forwarded-*, etc.)
TRUST_PROXY_HEADERS=true

# Force HTTPS redirects
FORCE_HTTPS=false

# =============================================================================
# EXAMPLES FOR DIFFERENT PROVIDERS
# =============================================================================

# Google OAuth2
# UPSTREAM_PROVIDER_URL=https://accounts.google.com
# UPSTREAM_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# UPSTREAM_CLIENT_SECRET=your-google-client-secret

# Auth0
# UPSTREAM_PROVIDER_URL=https://your-tenant.auth0.com
# UPSTREAM_CLIENT_ID=your-auth0-client-id
# UPSTREAM_CLIENT_SECRET=your-auth0-client-secret

# Keycloak
# UPSTREAM_PROVIDER_URL=https://your-keycloak-server/auth/realms/your-realm
# UPSTREAM_CLIENT_ID=your-keycloak-client-id
# UPSTREAM_CLIENT_SECRET=your-keycloak-client-secret